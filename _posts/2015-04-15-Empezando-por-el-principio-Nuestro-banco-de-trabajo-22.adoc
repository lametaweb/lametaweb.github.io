= Empezando por el principio. Nuestro banco de trabajo. (2/2)
La metaweb
:hp-tags: Eclipse, JBoss, JBoss Tools
:published_at: 2015-04-15

En esta segunda entrada terminaremos de instalar y configurar el software que nos permitirá en adelante construir nuestras propias aplicaciones Java EE. Como IDE optamos por Eclipse, por ser el más extendido. El salto de uno a otro IDE no es algo costoso, ni en tiempo de aprendizaje ni en tiempo de adaptación del proyecto si los gestionamos bajo Maven o Gradle.

Un IDE debe procurar al desarrollador un entorno que le permita ser lo más productivo posible, ocultando la complejidad de las tecnologías empleadas tras el código fuente generado para resolver las tareas de los documentos de diseño del proyecto. Un ejemplo lo tenemos cuando creamos un web service, aquí el IDE nos generará todas las clases y ficheros necesarios y nosotros sólo tendremos que enfocarnos en definir la API e implementar cada operación.

En mi experiencia Netbeans es un buen entorno, con muchas ayudas, y maduro en su versión en su versión 8, además tiene detrás a una gran comunidad y a Oracle. Como dato en contra, durante el desarrollo de un proyecto mediano, en la versión 8.0, de cuando en cuando se quedaba "pensando" unos segundos. Por otro lado tenemos a JDeveloper, que es el IDE oficial de Oracle, muy potente y una opción recomendable para nuevos proyectos de gran tamaño, y si desarrollamos contra Oracle, y/o el servidor Weblogic. Para proyectos Spring está Eclipse STS que ofrece potentes wizards. Si nuestro servidor es JBoss o el nuevo WildFly podemos optar la solución adoptada aquí, Eclipse + JBoss Tools, o directamente por JBoss Developer Studio. La ventaja de optar por Eclipse es que podemos personalizar nuestro entorno instalando los plugins que elijamos. En definitiva tenemos múltiples opciones y la decisión muchas veces dependerá de las tecnologías que elijamos o nos imponga el tipo de proyecto o el propio cliente.

Ok, antes de nada vamos a crear una sencilla estructura de carpetas donde ir guardardo el trabajo, y donde instalar el software. Por ejemplo la siguiente:

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig009.png[]

Bajo la carpeta `TALLER` creamos las siguientes:

* `BD`: Para las bases de datos que vayamos instalando: MySQL, Derby, etc.
* `IDE`: Para la instalación del IDE Eclipse. Instalad otros si queréis echarles un vistazo.
* `Servidor`: Aquí irá nuestro JBoss EAP edición Comunity. Aunque si en el futuro vemos algo particular de Java EE 7 instalaremos WildFly o GlassFish. 
* `Workspace`: Para guardar los proyectos desarrollados en Eclipse.

El fichero comprimido es simplemente una forma rápida de hacer una copia de seguridad del workspace.

Para instalar Eclipse, os aconsejo de nuevo que lo hagáis en Inglés, vamos a la página https://www.eclipse.org/downloads/ y elegimos la instalación para desarrolladores de Java EE.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig010.png[]

Bajamos el fichero `.zip`, lo copiamos en la carpeta `c:\TALLER\IDE\` y seleccionamos Extraer aquí, no hay programa de instalación. Entramos en la carpeta de Eclipse y doble click en `eclipse.exe`. Seleccionamos la carpeta `c:\TALLER\workspace\` como espacio de trabajo. El IDE se carga y cerramos la pantalla inicial de bienvenida pulsando en el icono en la esquina arriba a la derecha.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig015.png[]

NOTE: No marquéis el check `Use this as the default and do not ask again` para así cambiar el workspace si queréis en un futuro. Si lo marcáis podéis volver a ver la pantalla de selección de la carpeta del workspace configurándolo en `Window > Preferences > General > Startup and Shutdown > Workspaces`.

Ahora le toca al servidor. Nuestro entorno de trabajo necesita un servidor completo para depurar el código que estemos desarrollando. Navegamos a la página oficial del servidor JBoss en  http://www.redhat.com/en/technologies/jboss-middleware/application-platform y pulsamos el botón `TRY IT NOW` dentro de la pestaña `TRY`, seleccionada por defecto.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig020.png[]

Esto nos lleva a la página del servidor JBoss para desarrolladores.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig022.png[]

Elegimos nuestro sistema operativo y pulsamos sobre el enlace del installer. Si no estamos ya logados saltaremos a la página de introducción de usuario y contrseña. Procedemos a la creación de una cuenta pulsando el enlace `Create Account`.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig025.png[]

Después de introducir una serie de datos básicos aceptamos los términos del  Programa de Desarrollador de Jboss. Esperamos a que la bajada del fichero acabe. Copiamos el fichero en la carpeta `C:\TALLER\Servidor\` y lo arrancamos escribiendo el comando `java -jar jboss-eap-6.3.0-installer.jar`.

Se iniciará un sencillo wizard de instalación. Si os aparece un mensaje acerca del Firewall de Windows elegid la opción `Permitir`. A la hora de elegir la carpeta de instalación seleccionad como antes, `C:\TALLER\Servidor\`. Escribimos luego un nombre de usuario y una contraseña. Estas credenciales son las del usuario administrador del servidor, que lo gestionará a través del navegador usando la Consola de Administración. Apuntad en un sitio seguro estos datos para no olvidarlos. En la instalación de este servidor se eligieron las credenciales:

[cols="1h,2", width="40"]
|===
|user
|admin

|password
|abcd-1234
|===
user: admin
password: abcd-1234

Es interesante instalar también los ejemplos que trae el servidor. Son varios proyectos Maven que muestran ejemplos sencillos sobre el uso de las diferentes tecnologías Java EE incidiendo en las gestionadas desde Red Hat: JPA (Hibernate), CDI (Weld), EJB, JSF, etc. Si abrimos el `pom.xml` de alguno de estos proyectos veremos como se definen de las dependencias en proyectos que se despliegan en el servidor JBoss.

El wizard continúa por una serie de pantallas donde dejamos las opciones por defecto, la instalación finaliza a los pocos segundos. Y ya tenemos instalado un flamante servidor Java EE 6 en local. Podemos finalmente guardar y echar un vistazo al script de instalación.

image::https://raw.githubusercontent.com/lametaweb/lametaweb.github.io/master/images/001/prac001-fig030.png[]

Comprobemos que la instalación del servidor es correcta desplegando el célebre Hello World!, que ahora tomaremos no del repositorio Maven como en la entrada anterior sino directamente de los ejemplos recién instalados. Este ejemplo sencillo usa las tecnologías CDI y Servlets. Abrimos una consola de comandos, vamos a la carpeta \bin\ dentro de la carpeta del servidor y lo iniciamos escribiendo "standalone.bat". Dejamos esta ventana de comandos abierta, podemos minimizarla.

NOTE: Si no se instalaron los ejemplos lo tomamos del repo desde Maven con el arquetipo: maven-archetype-site-simple

